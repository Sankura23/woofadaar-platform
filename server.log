
> woofadaar@0.1.0 dev
> next dev

   â–² Next.js 15.4.5
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.6:3000
   - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 1183ms
 â—‹ Compiling /api/auth/login ...
 âœ“ Compiled /api/auth/login in 651ms (365 modules)
 POST /api/auth/login 200 in 1099ms
 POST /api/auth/login 200 in 31ms
 POST /api/auth/login 200 in 7ms
 â—‹ Compiling / ...
 âœ“ Compiled / in 6.5s (665 modules)
 GET / 200 in 6683ms
 âœ“ Compiled /api/i18n/[lang] in 73ms (662 modules)
 GET /api/i18n/en 200 in 321ms
 âœ“ Compiled /login in 166ms (679 modules)
 GET /login 200 in 230ms
 âœ“ Compiled /api/auth/login in 68ms (513 modules)
Database error during user login, using demo auth: Error [PrismaClientInitializationError]: 
Invalid `prisma.user.findUnique()` invocation:


Can't reach database server at `db.cqfgtugxcyjtxzvcshij.supabase.co:5432`

Please make sure your database server is running at `db.cqfgtugxcyjtxzvcshij.supabase.co:5432`.
    at async POST (src/app/api/auth/login/route.ts:134:15)
  132 |       let user = null;
  133 |       try {
> 134 |         user = await prisma.user.findUnique({
      |               ^
  135 |           where: { email }
  136 |         });
  137 |       } catch (dbError) { {
  clientVersion: '6.13.0',
  errorCode: undefined,
  retryable: undefined
}
 POST /api/auth/login 200 in 5230ms
 âœ“ Compiled /profile in 184ms (831 modules)
 GET /profile 200 in 293ms
 âœ“ Compiled /api/dogs in 488ms (1095 modules)
[32m[32minfo[32m[39m: [32mDatabase dogs_fetch completed[39m {"duration":"177ms","environment":"development","operation":"dogs_fetch","service":"woofadaar-api","success":true,"table":"dogs","timestamp":"2025-08-13T18:03:57.349Z"}
[32m[32minfo[32m[39m: [32mDogs retrieved successfully[39m {"count":0,"duration":181,"environment":"development","includeHealth":false,"method":"GET","requestId":"ooj10idn9id","service":"woofadaar-api","timestamp":"2025-08-13T18:03:57.170Z","url":"/api/dogs","userId":"demo-user-123"}
 GET /api/dogs 200 in 926ms
 GET /api/user 404 in 981ms
 GET /profile 200 in 115ms
 GET /api/user 404 in 23ms
 âœ“ Compiled /profile/dogs in 214ms (1114 modules)
 GET /profile/dogs 200 in 254ms
 âœ“ Compiled /health in 198ms (1157 modules)
 GET /health 200 in 247ms
 GET /profile 200 in 34ms
 GET /api/user 404 in 132ms
 GET /api/user 404 in 25ms
 GET /profile/dogs 200 in 36ms
 âœ“ Compiled /profile/dogs/add in 238ms (1168 modules)
 GET /profile/dogs/add 200 in 278ms
 âœ“ Compiled /api/upload in 401ms (1412 modules)
 POST /api/upload 200 in 6233ms
[31m[31merror[31m[39m: [31mDatabase dog_creation failed[39m {"duration":"67ms","environment":"development","error":"\nInvalid `prisma.dog.create()` invocation:\n\n\nForeign key constraint violated on the constraint: `Dog_user_id_fkey`","operation":"dog_creation","service":"woofadaar-api","success":false,"table":"dogs","timestamp":"2025-08-13T18:04:38.265Z"}
[31m[31merror[31m[39m: [31mDatabase error in dog creation[39m {"duration":192,"environment":"development","error":{"message":"Database dog creation failed: \nInvalid `prisma.dog.create()` invocation:\n\n\nForeign key constraint violated on the constraint: `Dog_user_id_fkey`","name":"DatabaseError","stack":"DatabaseError: Database dog creation failed: \nInvalid `prisma.dog.create()` invocation:\n\n\nForeign key constraint violated on the constraint: `Dog_user_id_fkey`\n    at eval (webpack-internal:///(rsc)/./src/app/api/dogs/route.ts:178:19)\n    at async AppRouteRouteModule.do (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdogs%2Froute&page=%2Fapi%2Fdogs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdogs%2Froute.ts&appDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183692)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdogs%2Froute&page=%2Fapi%2Fdogs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdogs%2Froute.ts&appDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdogs%2Froute&page=%2Fapi%2Fdogs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdogs%2Froute.ts&appDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsanket%2FDesktop%2Fwoofadaar1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:1929:13)\n    at async DevServer.renderPageComponent (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:2435:32)\n    at async DevServer.pipeImpl (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:1035:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/base-server.js:925:17)\n    at async /Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/Users/sanket/Desktop/woofadaar1/node_modules/next/dist/server/lib/start-server.js:218:13)"},"method":"POST","requestId":"f2gye32gio","service":"woofadaar-api","timestamp":"2025-08-13T18:04:38.076Z","url":"/api/dogs","userId":"demo-user-123"}
 POST /api/dogs 500 in 279ms
 GET / 200 in 118ms
 GET /login 200 in 45ms
 âœ“ Compiled /register in 184ms (1419 modules)
 GET /register 200 in 261ms
 âœ“ Compiled /api/auth/register in 227ms (1419 modules)
 POST /api/auth/register 200 in 652ms
 GET /login 200 in 54ms
 âœ“ Compiled /api/auth/login in 87ms (561 modules)
 POST /api/auth/login 200 in 450ms
 GET /profile 200 in 62ms
 âœ“ Compiled /api/dogs in 139ms (563 modules)
 âœ“ Compiled (826 modules)
[32m[32minfo[32m[39m: [32mDatabase dogs_fetch completed[39m {"duration":"67ms","environment":"development","operation":"dogs_fetch","service":"woofadaar-api","success":true,"table":"dogs","timestamp":"2025-08-13T18:05:58.748Z"}
[32m[32minfo[32m[39m: [32mDogs retrieved successfully[39m {"count":0,"duration":68,"environment":"development","includeHealth":false,"method":"GET","requestId":"7z373c156jk","service":"woofadaar-api","timestamp":"2025-08-13T18:05:58.681Z","url":"/api/dogs","userId":"user_1755108303238_gfichs4ua"}
 GET /api/dogs 200 in 333ms
 GET /api/user 200 in 416ms
 âœ“ Compiled /api/upload in 189ms (1070 modules)
 POST /api/upload 200 in 6786ms
 PUT /api/user 200 in 163ms
 âœ“ Compiled /profile/dogs in 217ms (1080 modules)
 GET /profile/dogs 200 in 272ms
 GET /profile/dogs/add 200 in 54ms
 âœ“ Compiled /api/dogs/generate-dog-id in 204ms (1398 modules)
 POST /api/dogs/generate-dog-id 400 in 255ms
 POST /api/upload 200 in 4548ms
[32m[32minfo[32m[39m: [32mDog profile validation failed[39m {"environment":"development","errors":[{"code":"too_small","inclusive":true,"message":"Emergency contact name must be at least 2 characters","minimum":2,"origin":"string","path":["emergency_contact"]}],"inputData":{"age_months":14,"breed":"Poodle","emergency_contact":"-","emergency_phone":"[REDACTED]","gender":"male","health_id":"","kennel_club_registration":"","location":"Pune, Maharashtra","name":"Poppy","personality_traits":[],"photo_url":"https://res.cloudinary.com/dzsrrmjfa/image/upload/v1755108414/woofadaar/pfho9w5k2lavw796hvsq.jpg","spayed_neutered":false,"vaccination_status":"up_to_date","weight_kg":4.5},"method":"POST","requestId":"puirfpa70e","service":"woofadaar-api","timestamp":"2025-08-13T18:06:55.165Z","url":"/api/dogs","userId":"user_1755108303238_gfichs4ua"}
 POST /api/dogs 400 in 71ms
 POST /api/upload 200 in 5450ms
[32m[32minfo[32m[39m: [32mDatabase dog_creation completed[39m {"duration":"91ms","environment":"development","operation":"dog_creation","service":"woofadaar-api","success":true,"table":"dogs","timestamp":"2025-08-13T18:07:12.073Z"}
[32m[32minfo[32m[39m: [32mDog profile created successfully[39m {"dogId":"cmeaa8tbu0005yg4r3x6yefsl","duration":252,"environment":"development","healthId":"WOFPOPOO431825","method":"POST","requestId":"s5y77kn2c4c","service":"woofadaar-api","timestamp":"2025-08-13T18:07:11.823Z","url":"/api/dogs","userId":"user_1755108303238_gfichs4ua"}
 POST /api/dogs 201 in 283ms
 GET /profile/dogs 200 in 68ms
[32m[32minfo[32m[39m: [32mDatabase dogs_fetch completed[39m {"duration":"19ms","environment":"development","operation":"dogs_fetch","service":"woofadaar-api","success":true,"table":"dogs","timestamp":"2025-08-13T18:07:13.706Z"}
[32m[32minfo[32m[39m: [32mDogs retrieved successfully[39m {"count":1,"duration":22,"environment":"development","includeHealth":false,"method":"GET","requestId":"et2omlx9s9m","service":"woofadaar-api","timestamp":"2025-08-13T18:07:13.686Z","url":"/api/dogs","userId":"user_1755108303238_gfichs4ua"}
 GET /api/dogs 200 in 32ms
 GET /profile/dogs 200 in 104ms
 GET /profile/dogs 200 in 65ms
 âœ“ Compiled /partners/directory in 209ms (1395 modules)
 GET /partners/directory 200 in 312ms
 âœ“ Compiled /api/partners in 131ms (1400 modules)
Slow query detected: searchPartners took 500.86ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=12&page=1 200 in 673ms
 GET /api/partners?limit=12&page=1 200 in 22ms
 âœ“ Compiled /appointments in 235ms (1399 modules)
 GET /appointments 200 in 289ms
 âœ“ Compiled /api/appointments/book in 120ms (1401 modules)
 GET /api/appointments/book 401 in 161ms
 GET /api/appointments/book 401 in 6ms
Slow query detected: searchPartners took 194.48ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=50 200 in 213ms
Slow query detected: searchPartners took 181.14ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=50 200 in 191ms
 âœ“ Compiled /community in 347ms (1398 modules)
 GET /community 200 in 407ms
 âœ“ Compiled /api/community/questions in 132ms (1400 modules)
 GET /api/community/questions?limit=5&sortBy=created_at&sortOrder=desc 200 in 423ms
 GET /api/community/questions?limit=5&sortBy=created_at&sortOrder=desc 200 in 103ms
 âœ“ Compiled /api/community/forums in 135ms (1402 modules)
 GET /api/community/forums?limit=5&sortBy=created_at&sortOrder=desc 200 in 330ms
 GET /api/community/forums?limit=5&sortBy=created_at&sortOrder=desc 200 in 38ms
 âœ“ Compiled /api/community/forums/categories in 133ms (1404 modules)
 GET /api/community/forums/categories?isActive=true 200 in 262ms
 GET /api/community/forums/categories?isActive=true 200 in 22ms
 âœ“ Compiled /api/points in 132ms (1406 modules)
 GET /api/points 401 in 153ms
 GET /api/points 401 in 6ms
 GET /appointments 200 in 48ms
 GET /api/appointments/book 401 in 20ms
 GET /api/appointments/book 401 in 7ms
Slow query detected: searchPartners took 190.49ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=50 200 in 207ms
 GET /api/partners?limit=50 200 in 17ms
 GET /partners/directory 200 in 43ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=12&page=1 200 in 30ms
 GET /api/partners?limit=12&page=1 200 in 10ms
 âœ“ Compiled /dog-id in 189ms (1411 modules)
 GET /dog-id 200 in 228ms
 âœ“ Compiled /api/dog-id/access in 288ms (1413 modules)
 GET /api/dog-id/access 200 in 316ms
 GET /api/dog-id/access 200 in 7ms
Slow query detected: searchPartners took 181.79ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=50 200 in 503ms
 GET /api/partners?limit=50 200 in 8ms
 âœ“ Compiled / in 469ms (1084 modules)
 GET / 200 in 585ms
 âœ“ Compiled /admin/waitlist in 210ms (1426 modules)
 GET /admin/waitlist 200 in 265ms
 âœ“ Compiled /api/partners/contact in 295ms (1431 modules)
 GET /api/waitlist?type=admin 200 in 474ms
 GET /api/partners/contact 200 in 503ms
 GET /api/waitlist?type=admin 200 in 39ms
 GET /api/partners/contact 200 in 18ms
 GET /api/waitlist?type=admin 200 in 62ms
 GET /api/waitlist?type=admin 200 in 36ms
 GET /api/partners/contact 200 in 39ms
 GET /api/waitlist?type=admin 200 in 50ms
 GET / 200 in 58ms
 GET /appointments 200 in 53ms
 GET /api/appointments/book 401 in 38ms
 GET /api/appointments/book 401 in 6ms
Partners API - Optimized search completed
Partners API - Found partners: 1
Partners API - Total count: 1
 GET /api/partners?limit=50 200 in 51ms
 GET /api/partners?limit=50 200 in 6ms
Appointment booking request: {
  partner_id: 'cme9x341y0001ygyrwjtvmc5b',
  user_id: 'user_1755108303238_gfichs4ua',
  appointment_date: '2025-08-14T13:45:00.000Z',
  service_type: 'treatment',
  meeting_type: 'in_person'
}
Partner found: {
  id: 'cme9x341y0001ygyrwjtvmc5b',
  name: 'Sydney Sweeney',
  business_name: '',
  status: 'approved',
  verified: true,
  partner_type: 'vet',
  specialization: null,
  consultation_fee_range: null,
  partnership_tier: 'basic',
  total_appointments: 5
}
Partner availability check result: false
 POST /api/appointments/book 409 in 87ms
Appointment booking request: {
  partner_id: 'cme9x341y0001ygyrwjtvmc5b',
  user_id: 'user_1755108303238_gfichs4ua',
  appointment_date: '2025-08-18T13:45:00.000Z',
  service_type: 'treatment',
  meeting_type: 'in_person'
}
Partner found: {
  id: 'cme9x341y0001ygyrwjtvmc5b',
  name: 'Sydney Sweeney',
  business_name: '',
  status: 'approved',
  verified: true,
  partner_type: 'vet',
  specialization: null,
  consultation_fee_range: null,
  partnership_tier: 'basic',
  total_appointments: 5
}
Partner availability check result: true
Calculated consultation fee: 800
Creating appointment with data: {
  partner_id: 'cme9x341y0001ygyrwjtvmc5b',
  user_id: 'user_1755108303238_gfichs4ua',
  dog_id: null,
  appointment_date: 2025-08-18T13:45:00.000Z,
  service_type: 'treatment',
  consultation_fee: 800,
  meeting_type: 'in_person'
}
Appointment created successfully: cmeaabifg0009yg4rguoatlnv
PartnerBooking created successfully: cmeaabiif000byg4rqxgm1ubr
Partner appointment count updated
Notifications queued: [
  {
    type: 'email',
    to: 's@c.com',
    subject: 'Appointment Confirmation - Woofadaar',
    template: 'appointment_confirmation_user',
    data: {
      id: 'cmeaabifg0009yg4rguoatlnv',
      partner_id: 'cme9x341y0001ygyrwjtvmc5b',
      user_id: 'user_1755108303238_gfichs4ua',
      dog_id: null,
      appointment_date: 2025-08-18T13:45:00.000Z,
      duration_minutes: 60,
      service_type: 'treatment',
      status: 'scheduled',
      notes: null,
      consultation_fee: 800,
      payment_status: 'pending',
      meeting_type: 'in_person',
      meeting_link: null,
      created_at: 2025-08-13T18:09:17.837Z,
      updated_at: 2025-08-13T18:09:17.837Z,
      partner: [Object],
      user: [Object],
      dog: null
    }
  },
  {
    type: 'email',
    to: 's@y.com',
    subject: 'New Appointment Booking - Woofadaar',
    template: 'appointment_notification_partner',
    data: {
      id: 'cmeaabifg0009yg4rguoatlnv',
      partner_id: 'cme9x341y0001ygyrwjtvmc5b',
      user_id: 'user_1755108303238_gfichs4ua',
      dog_id: null,
      appointment_date: 2025-08-18T13:45:00.000Z,
      duration_minutes: 60,
      service_type: 'treatment',
      status: 'scheduled',
      notes: null,
      consultation_fee: 800,
      payment_status: 'pending',
      meeting_type: 'in_person',
      meeting_link: null,
      created_at: 2025-08-13T18:09:17.837Z,
      updated_at: 2025-08-13T18:09:17.837Z,
      partner: [Object],
      user: [Object],
      dog: null
    }
  }
]
 POST /api/appointments/book 200 in 258ms
 GET /api/appointments/book 401 in 34ms
 âœ“ Compiled /profile in 303ms (574 modules)
 GET /profile 200 in 386ms
 âœ“ Compiled /api/dogs in 99ms (576 modules)
 âœ“ Compiled (839 modules)
[32m[32minfo[32m[39m: [32mDatabase dogs_fetch completed[39m {"duration":"1176ms","environment":"development","operation":"dogs_fetch","service":"woofadaar-api","success":true,"table":"dogs","timestamp":"2025-08-13T18:09:23.856Z"}
[32m[32minfo[32m[39m: [32mDogs retrieved successfully[39m {"count":1,"duration":1183,"environment":"development","includeHealth":false,"method":"GET","requestId":"7ongyl3uexb","service":"woofadaar-api","timestamp":"2025-08-13T18:09:22.677Z","url":"/api/dogs","userId":"user_1755108303238_gfichs4ua"}
 GET /api/dogs 200 in 1460ms
 GET /api/user 200 in 1549ms
 GET /api/user 200 in 32ms
 GET / 200 in 130ms
 âœ“ Compiled /login in 116ms (847 modules)
 GET /login 200 in 160ms
 âœ“ Compiled /api/auth/login in 179ms (844 modules)
 POST /api/auth/login 200 in 331ms
 âœ“ Compiled /partner/dashboard in 213ms (1189 modules)
 GET /partner/dashboard 200 in 332ms
 âœ“ Compiled /api/partners/dashboard in 154ms (1191 modules)
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 393ms
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 40ms
 âœ“ Compiled /api/partner/dashboard/stats in 132ms (1193 modules)
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 305ms
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 47ms
 âœ“ Compiled /partner/appointments in 180ms (1200 modules)
 GET /partner/appointments 200 in 220ms
 âœ“ Compiled /api/partners/current/stats in 260ms (1204 modules)
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/stats - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/dashboard/stats
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/appointments - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/appointments
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
 âœ“ Compiled /api/partner/appointments in 132ms (1206 modules)
Fetching appointments for partner: cme9x341y0001ygyrwjtvmc5b
Status filter: null
Query where clause: { partner_id: 'cme9x341y0001ygyrwjtvmc5b' }
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 193ms
âœ… Redirected stats API returned data: true
 GET /api/partners/current/stats 200 in 478ms
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/stats - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/dashboard/stats
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 114ms
âœ… Redirected stats API returned data: true
 GET /api/partners/current/stats 200 in 123ms
Found 6 real appointments: [
  {
    id: 'cmeaabifg0009yg4rguoatlnv',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T18:09:17.837Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea8ltzf0001ygvvajl0mub1',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T17:21:20.138Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea02um0000hygrsezqyztqd',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T13:22:37.560Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9zrs5h000dygrsd2bjufwe',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T13:14:01.157Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9xqfax0005ygyr97juv7l9',
    service_type: 'training',
    status: 'scheduled',
    created_at: 2025-08-13T12:16:58.617Z,
    user_name: 'Sanket C',
    dog_name: undefined
  },
  {
    id: 'cme9x62uw0003ygyr38av7zjg',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T12:01:09.368Z,
    user_name: 'Sanket C',
    dog_name: undefined
  }
]
 GET /api/partner/appointments 200 in 368ms
âœ… Redirected API returned data: 6 appointments
 GET /api/partners/current/appointments? 200 in 652ms
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/appointments - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/appointments
Fetching appointments for partner: cme9x341y0001ygyrwjtvmc5b
Status filter: null
Query where clause: { partner_id: 'cme9x341y0001ygyrwjtvmc5b' }
Found 6 real appointments: [
  {
    id: 'cmeaabifg0009yg4rguoatlnv',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T18:09:17.837Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea8ltzf0001ygvvajl0mub1',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T17:21:20.138Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea02um0000hygrsezqyztqd',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T13:22:37.560Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9zrs5h000dygrsd2bjufwe',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T13:14:01.157Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9xqfax0005ygyr97juv7l9',
    service_type: 'training',
    status: 'scheduled',
    created_at: 2025-08-13T12:16:58.617Z,
    user_name: 'Sanket C',
    dog_name: undefined
  },
  {
    id: 'cme9x62uw0003ygyr38av7zjg',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T12:01:09.368Z,
    user_name: 'Sanket C',
    dog_name: undefined
  }
]
 GET /api/partner/appointments 200 in 46ms
âœ… Redirected API returned data: 6 appointments
 GET /api/partners/current/appointments? 200 in 59ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled /_not-found in 325ms (1211 modules)
 GET /partner 404 in 384ms
 GET /partner/dashboard 200 in 44ms
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 257ms
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 50ms
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 198ms
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 65ms
 GET /partner/appointments 200 in 45ms
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/appointments - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/appointments
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/stats - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/dashboard/stats
Fetching appointments for partner: cme9x341y0001ygyrwjtvmc5b
Status filter: null
Query where clause: { partner_id: 'cme9x341y0001ygyrwjtvmc5b' }
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Found 6 real appointments: [
  {
    id: 'cmeaabifg0009yg4rguoatlnv',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T18:09:17.837Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea8ltzf0001ygvvajl0mub1',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T17:21:20.138Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea02um0000hygrsezqyztqd',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T13:22:37.560Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9zrs5h000dygrsd2bjufwe',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T13:14:01.157Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9xqfax0005ygyr97juv7l9',
    service_type: 'training',
    status: 'scheduled',
    created_at: 2025-08-13T12:16:58.617Z,
    user_name: 'Sanket C',
    dog_name: undefined
  },
  {
    id: 'cme9x62uw0003ygyr38av7zjg',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T12:01:09.368Z,
    user_name: 'Sanket C',
    dog_name: undefined
  }
]
 GET /api/partner/appointments 200 in 58ms
âœ… Redirected API returned data: 6 appointments
 GET /api/partners/current/appointments? 200 in 73ms
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/appointments - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/appointments
Fetching appointments for partner: cme9x341y0001ygyrwjtvmc5b
Status filter: null
Query where clause: { partner_id: 'cme9x341y0001ygyrwjtvmc5b' }
Found 6 real appointments: [
  {
    id: 'cmeaabifg0009yg4rguoatlnv',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T18:09:17.837Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea8ltzf0001ygvvajl0mub1',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T17:21:20.138Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cmea02um0000hygrsezqyztqd',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T13:22:37.560Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9zrs5h000dygrsd2bjufwe',
    service_type: 'treatment',
    status: 'scheduled',
    created_at: 2025-08-13T13:14:01.157Z,
    user_name: 'Sanket',
    dog_name: undefined
  },
  {
    id: 'cme9xqfax0005ygyr97juv7l9',
    service_type: 'training',
    status: 'scheduled',
    created_at: 2025-08-13T12:16:58.617Z,
    user_name: 'Sanket C',
    dog_name: undefined
  },
  {
    id: 'cme9x62uw0003ygyr38av7zjg',
    service_type: 'consultation',
    status: 'scheduled',
    created_at: 2025-08-13T12:01:09.368Z,
    user_name: 'Sanket C',
    dog_name: undefined
  }
]
 GET /api/partner/appointments 200 in 38ms
âœ… Redirected API returned data: 6 appointments
 GET /api/partners/current/appointments? 200 in 48ms
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 158ms
âœ… Redirected stats API returned data: true
 GET /api/partners/current/stats 200 in 179ms
ðŸš¨ DEPRECATED API CALLED: /api/partners/current/stats - REDIRECTING TO CORRECT ENDPOINT
Referrer: http://localhost:3000/partner/appointments
ðŸ”„ Redirecting internally to: http://localhost:3000/api/partner/dashboard/stats
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 48ms
âœ… Redirected stats API returned data: true
 GET /api/partners/current/stats 200 in 58ms
 GET /partner 404 in 48ms
 GET /partner/dashboard 200 in 30ms
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 46ms
Partner dashboard API called
Token received: eyJhbGciOiJIUzI1NiIs...
Auth result: { userId: undefined, partnerId: 'cme9x341y0001ygyrwjtvmc5b' }
Partner ID from token: cme9x341y0001ygyrwjtvmc5b
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Database query results: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
Returning stats: {
  totalAppointments: 6,
  completedAppointments: 0,
  pendingAppointments: 6,
  totalRevenue: 0,
  averageRating: 0,
  totalReviews: 0
}
 GET /api/partners/dashboard 200 in 35ms
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 58ms
Fetching partner stats for partner: cme9x341y0001ygyrwjtvmc5b
Appointment stats: [ { _count: { id: 6 }, status: 'scheduled' } ]
Revenue data: { _sum: { consultation_fee: null } }
Pending earnings: { _sum: { consultation_fee: 3700 } }
Real stats calculated: {
  appointments: { today: 0, upcoming: 6, total_this_month: 6, growth_percentage: 15 },
  revenue: {
    this_month: 0,
    last_month: 0,
    pending_earnings: 3700,
    total_earnings: 0
  },
  reviews: {
    average_rating: 4.8,
    total_reviews: 0,
    recent_reviews: 0,
    rating_distribution: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0 }
  },
  dogs_accessed: { today: 0, this_month: 6, total: 6 }
}
 GET /api/partner/dashboard/stats 200 in 54ms
 GET / 200 in 67ms
[?25h
